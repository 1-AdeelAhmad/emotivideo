(this.webpackJsonpemotivideo=this.webpackJsonpemotivideo||[]).push([[0],{42:function(e,t,n){e.exports=n(64)},47:function(e,t,n){},48:function(e,t,n){},56:function(e,t){},57:function(e,t){},58:function(e,t){},64:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(15),o=n.n(i),c=(n(47),n(24)),s=n(25),l=n(30),m=n(29),d=(n(48),n(85)),u=n(65),g=n(86),h=n(87),p=n(13),f=n.n(p),v=n(23),w=n(35),E=n.n(w),b=n(6),x=n(11),y=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).componentDidMount=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadNewModel();case 2:e.setInputDevice();case 3:case"end":return t.stop()}}),t)}))),e.loadNewModel=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/emotivideo/models",e.next=3,x.d.tinyFaceDetector.loadFromUri(t);case 3:return e.next=5,x.d.faceLandmark68Net.loadFromUri(t);case 5:return e.next=7,x.d.faceRecognitionNet.loadFromUri(t);case 7:return e.next=9,x.d.faceExpressionNet.loadFromUri(t);case 9:return e.next=11,x.d.ageGenderNet.loadFromUri(t);case 11:case"end":return e.stop()}}),e)}))),e.setInputDevice=function(){navigator.mediaDevices.enumerateDevices().then(function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.filter((function(e){return"videoinput"===e.kind}));case 2:if(!(t.sent.length<2)){t.next=8;break}return t.next=6,e.setState({facingMode:"user"});case 6:t.next=10;break;case 8:return t.next=10,e.setState({facingMode:{exact:"environment"}});case 10:e.startVideoFeed();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.startVideoFeed=function(){e.interval=setInterval((function(){e.videoFeed()}),100)},e.componentWillUnmount=function(){clearInterval(e.interval)},e.videoFeed=Object(v.a)(f.a.mark((function t(){var n,a,r,i,o,c,s,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("video"),t.next=3,x.b(n,new x.a).withFaceLandmarks().withAgeAndGender().withFaceExpressions();case 3:return a=t.sent,t.next=6,e.setState({detections:a});case 6:r={width:300,height:300},i=x.e(a,r),(o=document.getElementById("canvas")).getContext("2d").clearRect(0,0,o.width,o.height),e.props.showLandmarks&&(x.c.drawDetections(o,i),x.c.drawFaceLandmarks(o,i)),console.log(a),e.state.detections.length>0&&(c=Object.keys(a[0].expressions).find((function(e){return a[0].expressions[e]>.5})),e.props.getCurrentEmotion(c),s=a[0].age,e.props.getCurrentAge(s),l=a[0].gender,e.props.getCurrentGender(l));case 13:case"end":return t.stop()}}),t)}))),e.state={facingMode:null,detections:null},e.webcam=r.a.createRef(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.state.facingMode,n=null;return t&&(n={width:300,height:300,facingMode:t}),r.a.createElement(u.a,{elevation:0,className:e.root},r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(E.a,{id:"video",audio:!1,width:300,height:300,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:n,style:{borderRadius:"20px"}}),r.a.createElement("canvas",{style:{position:"absolute"},id:"canvas",ref:this.canvas,width:300,height:300})))}}]),n}(r.a.Component),k=Object(b.a)((function(e){return{root:{flexGrow:1,margin:"0 auto",width:"90vw",height:"90vw",marginTop:"1rem",marginBottom:"1rem",borderRadius:"20px"}}}))(y),C=n(81),O=n(82),j=n(83),L=n(84),F=Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontSize:" 1.25rem"},subtitle:{marginTop:"1rem",marginBottom:"1rem",fontStyle:"italic",fontSize:".6rem"}}})),N=function(){var e=F();return r.a.createElement("div",null,r.a.createElement(O.a,{position:"static",color:"primary",style:{borderTopRightRadius:"20px",borderTopLeftRadius:"20px"}},r.a.createElement(j.a,null,r.a.createElement(L.a,{variant:"h5",className:e.title},"Emoti Video"))),r.a.createElement(L.a,{className:e.subtitle,align:"center",display:"block",variant:"button"},"An App That Detects Facial Emotions In Real-Time"))},R=function(e){var t=e.emotion;return r.a.createElement("div",{style:{margin:"0 auto",marginTop:"1rem",width:"80vw"}},r.a.createElement(u.a,{elevation:3,style:{padding:"1rem"}},r.a.createElement(L.a,{style:{marginBottom:".5rem"},align:"center",variant:"body2"},"CURRENT EXPRESSION:"),r.a.createElement(L.a,{align:"center",variant:"subtitle2"},t?t.toUpperCase():"LOADING...")))},G=function(e){var t=e.age;return r.a.createElement("div",{style:{margin:"0 auto",width:"30vw"}},r.a.createElement(u.a,{elevation:3,style:{padding:"1rem"}},r.a.createElement(L.a,{style:{marginBottom:".5rem"},align:"center",variant:"body2"},"AGE:"),r.a.createElement(L.a,{align:"center",variant:"subtitle2"},t?Math.round(t):"LOADING...")))},S=function(e){var t=e.gender;return r.a.createElement("div",{style:{margin:"0 auto",width:"30vw"}},r.a.createElement(u.a,{elevation:3,style:{padding:"1rem"}},r.a.createElement(L.a,{style:{marginBottom:".5rem"},align:"center",variant:"body2"},"GENDER:"),r.a.createElement(L.a,{align:"center",variant:"subtitle2"},t?t.toUpperCase():"LOADING...")))},D=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getCurrentEmotion=function(t){e.setState({emotion:t})},e.getCurrentAge=function(t){e.setState({age:t})},e.getCurrentGender=function(t){e.setState({gender:t})},e.showLandmarks=function(t){t.preventDefault(),e.setState({showLandmarks:!e.state.showLandmarks})},e.state={emotion:"",age:"",gender:"",showLandmarks:!1},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{maxWidth:"sm",style:{marginTop:"2rem",marginBottom:"2rem"}},r.a.createElement(u.a,{elevation:3,style:{borderRadius:"20px"}},r.a.createElement(N,null),r.a.createElement("hr",{style:{width:"60%"}}),r.a.createElement(k,{getCurrentEmotion:this.getCurrentEmotion,getCurrentAge:this.getCurrentAge,getCurrentGender:this.getCurrentGender,showLandmarks:this.state.showLandmarks}),r.a.createElement("hr",{style:{width:"60%"}}),r.a.createElement(g.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(R,{emotion:this.state.emotion})),r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement(G,{age:this.state.age})),r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement(S,{gender:this.state.gender})),r.a.createElement(g.a,{item:!0,sm:12},r.a.createElement(u.a,{style:{padding:".25rem"}},r.a.createElement(h.a,{onClick:this.showLandmarks},this.state.showLandmarks?"Click To Hide Landmarks":"Click To Show Landmarks"))))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.3f256018.chunk.js.map